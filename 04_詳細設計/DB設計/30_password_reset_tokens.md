# PasswordResetTokens テーブル詳細設計

## ドキュメント目的
- `password_reset_tokens`テーブルの構造・運用ルールを定義し、パスワードリセットトークンを管理する。
- リセット方式変更時は本書とメールテンプレートを更新する。

## 1. 基本情報
| 項目 | 内容 | 備考 |
|---|---|---|
| テーブル物理名 | password_reset_tokens |  |
| テーブル論理名 | パスワードリセットトークン | Laravel標準 |
| ドメイン/コンテキスト | Auth |  |
| 主キー | email（VARCHAR(255)） |  |

## 2. カラム定義
| No | カラム名 | 論理名 | 型 | PK | Not Null | デフォルト | 説明/業務ルール | 備考 |
|---|---|---|---|---|---|---|---|---|
| 1 | email | 対象メール | VARCHAR(255) | ○ | ○ |  | リセット対象ユーザーのメール。 | 主キー |
| 2 | token | トークン | VARCHAR(255) |  | ○ |  | ハッシュ化されたトークン。 |  |
| 3 | created_at | 発行日時 | TIMESTAMP(0) |  |  |  | リクエスト時刻。NULLの場合は未設定。 |  |

## 3. インデックス・キー設計
| 種別 | 名称 | 対象カラム | ユニーク | 用途/目的 | 備考 |
|---|---|---|---|---|---|
| 主キー | PRIMARY | email | ○ | メール単位で1トークン管理 |  |

## 4. 制約・リレーション
| 種別 | 名称 | 内容 | 備考 |
|---|---|---|---|
| 主キー | PRIMARY | 同一メールの複数発行を防止 |  |
| 運用ルール | TTL管理 | `created_at`基準で有効期限を判定。期限切れは削除ジョブ。 |  |

## 改定履歴
| 改定日 | 版数 | 変更概要 | 担当 |
|---|---|---|---|
| 2025-09-19 | v0.1 | 新規作成 |  |
| 2025-10-10 | v1 | フェーズ0.5のリリース版 | Codex AI |